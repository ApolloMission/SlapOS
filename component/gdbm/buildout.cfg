[buildout]
parts =
  gdbm

[gdbm]
recipe = slapos.recipe.cmmi
version = 1.10
url = ftp://ftp.gnu.org/gnu/gdbm/gdbm-${:version}.tar.gz
md5sum = 88770493c2559dc80b561293e39d3570
configure-options =
  --disable-static

[x86-linux-gdbm]
# install as parts/gdbm/include/gdbm/*.h etc. because some softwares
# (eg. python's dbmmodule.c extension) assume the location like this.
make-targets =
  install includedir=%(preifx)s/gdbm 
post-install = rm -f %(preifx)s/*.h && ln -sf gdbm/gdbm.h %(preifx)s/gdbm.h
# it seems that parallel build sometimes fails for gdbm.
make-options =
  -j1

[x86-cygwin-gdbm]
patches = ${:_profile_base_location_}/cygwin-gdbm-1.10-src.patch
