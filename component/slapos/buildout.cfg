# This file is used to install SlapOS Node itself.

[buildout]
extends =
  ../../stack/shacache-client.cfg

parts =
  slapos
  py

find-links =
  http://www.nexedi.org/static/packages/source/
  http://www.nexedi.org/static/packages/source/slapos.buildout/
  http://www.nexedi.org/static/packages/source/hexagonit.recipe.download/

versions = versions

allow-hosts =
  *.googlecode.com
  *.nexedi.org
  *.python.org
  alastairs-place.net
  code.google.com
  github.com
  peak.telecommunity.com

# separate from system python
include-site-packages = true
exec-sitecustomize = true
allowed-eggs-from-site-packages = true

[lxml-python]
recipe = zc.recipe.egg:custom
egg = lxml

[slapos]
recipe = z3c.recipe.scripts
eggs =
  slapos.libnetworkcache
  zc.buildout
  ${lxml-python:egg}
  slapos.core

# control scripts generation in order to avoid reinstalling bin/buildout
scripts =
  bang = slapos.bang:main
  generate-signature-key = slapos.signature:run
  slapconsole = slapos.console:run
  slapos-request = slapos.console:request
  slapformat = slapos.format:main
  slapgrid = slapos.grid.slapgrid:run
  slapgrid-cp = slapos.grid.slapgrid:runComputerPartition
  slapgrid-sr = slapos.grid.slapgrid:runSoftwareRelease
  slapgrid-ur = slapos.grid.slapgrid:runUsageReport
  slapgrid-supervisorctl = slapos.grid.svcbackend:supervisorctl
  slapgrid-supervisord = slapos.grid.svcbackend:supervisord
  slapproxy = slapos.proxy:main
  slapproxy-query = slapos.proxy.query:main
  slapos = slapos.entry:main
  slapos-watchdog = slapos.grid.watchdog:main

[py]
recipe = zc.recipe.egg
eggs = 
    ${slapos:eggs}
interpreter = py
scripts = py

[versions]
# Use our own buildout version
zc.buildout = 1.6.0-dev-SlapOS-010

# Don't use beta
lxml = 3.0.2

Jinja2 = 2.6
Werkzeug = 0.8.3
buildout-versions = 1.7
collective.recipe.template = 1.9
hexagonit.recipe.cmmi = 1.6
meld3 = 0.6.10
netaddr = 0.7.10
slapos.core = 0.35
slapos.libnetworkcache = 0.13.3
xml-marshaller = 0.9.7
z3c.recipe.scripts = 1.0.1
zc.recipe.egg = 1.3.2

# Required by:
# slapos.core==0.35
Flask = 0.9

# Required by:
# hexagonit.recipe.cmmi==1.6
hexagonit.recipe.download = 1.6nxd002

# Required by:
# slapos.core==0.35
netifaces = 0.8-1

# Required by:
# slapos.core==0.35
pyflakes = 0.6.1

# Required by:
# slapos.core==0.35
# slapos.libnetworkcache==0.13.3
# supervisor==3.0b1
# zc.buildout==1.6.0-dev-SlapOS-010
# zope.interface==4.0.3
setuptools = 0.6c12dev-r88846

# Required by:
# slapos.core==0.35
supervisor = 3.0b1

# Required by:
# slapos.core==0.35
unittest2 = 0.5.1

# Required by:
# slapos.core==0.35
zope.interface = 4.0.3
