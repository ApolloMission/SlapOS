[buildout]
parts =
  openvpn

[openvpn]
recipe = slapos.recipe.cmmi
url = http://swupdate.openvpn.org/community/releases/openvpn-2.3.0.tar.gz
md5sum = 56cffde5d5320e0b1ec364d3e486aca9

[x86-cygwin-zlib]
share = /usr/local
promises = /usr/local/bin/openvpn.exe
configure-options =
  ac_cv_type_socklen_t=yes
  IFCONFIG="${SYSTEMDRIVE}:/WINDOWS/system32"
  LDFLAGS="-liphlpapi -lws2_32"
  CFLAGS="-DWIN32 -DCYGWIN -D__USE_W32_SOCKETS -D__INSIDE_CYGWIN_NET__ -DWIN32_LEAN_AND_MEAN -D_WIN32_WINNT=0x0503"
  --disable-lzo
  --disable-pkcs11
  --disable-plugin-auth-pam
  --disable-plugin-down-root

patch-options = -p1
patches =
  ${:_profile_base_location_}/openvpn-2.3.0-cygwin.patch

