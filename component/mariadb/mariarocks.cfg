[buildout]
extends =
  ../bison/buildout.cfg
  buildout.cfg

[mariarocks-source]
recipe = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git
repository = https://github.com/MariaDB/server.git
branch = bb-10.2-mariarocks

[mariadb]
<= mariadb-10.2-mariarocks

[mariadb-10.2-mariarocks]
<= mariadb-common
path = ${mariarocks-source:location}
pre-configure =
  ${git:location}/bin/git submodule update --init
post-install +=
  make clean
configure-options +=
  -DCMAKE_PROGRAM_PATH=${bison:location}/bin
