[buildout]
extends =
  ../component/lxml-python/buildout.cfg
  ../component/mysql-5.1/buildout.cfg

parts =
  tomcat
  java
  xwiki
  hsql
  mysql-5.1
  eggs

[hsql]
recipe = hexagonit.recipe.download
url = http://hsqldb.org/support/hsqldb_16.zip
md5sum = 5e5f08e1c838e97efa359cdfc301cc06

[tomcat]
recipe = hexagonit.recipe.download
strip-top-level-dir = true
url = http://apache.multidist.com/tomcat/tomcat-6/v6.0.32/bin/apache-tomcat-6.0.32.zip
md5sum = 082a0707985b6c029920d4d6d5ec11cd

[xwiki]
recipe = hexagonit.recipe.download
url = http://download.forge.objectweb.org/xwiki/xwiki-enterprise-web-2.7.war
md5sum = c56e2cde96d28c5899a16a8270b6ff88

[java-download]
recipe = slapos.cookbook:download
# 64bit self extracting
url = http://javadl.sun.com/webapps/download/AutoDL?BundleId=43875
md5sum = e4143387e31838a51df76774d102f49a

[java]
recipe = plone.recipe.command
location = ${buildout:parts-directory}/${:_buildout_section_name_}
command = rm -fr ${:location} && mkdir -p ${:location} && cd ${:location} && /bin/sh ${java-download:target}
update-command = ${:command}

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  slapos.cookbook


