[buildout]
extends =
  ../../component/dcron/buildout.cfg
  ../../component/gzip/buildout.cfg
  ../../component/logrotate/buildout.cfg
parts =
  template-logrotate-base

[logrotate-conf-template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/logrotate.conf.in
md5sum = 24f021a248f2802ee70857cf3d8832f2
# XXX: following mode should be the default
mode = 644

[logrotate-entry-template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/logrotate_entry.in
md5sum = 7a5ec8f141c61826a14db8619acba314
# XXX: following mode should be the default
mode = 644

[template-logrotate-base]
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/${:filename}.in
rendered = ${buildout:directory}/${:filename}
filename = instance-logrotate-base.cfg
md5sum = 3e3e572c5537f77e83b1ee157d1c9852
context =
    key dcron_location dcron:location
    key gzip_location gzip:location
    key logrotate_location logrotate:location
    key logrotate_conf_template logrotate-conf-template:target
    key logrotate_entry_template logrotate-entry-template:target
