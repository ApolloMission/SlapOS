[buildout]
parts =
  slapos-cookbook
  apache-php-postgres
  rdiff-backup
  dropbear
  eggs
  instance
  psycopg2

  instance-apache-php
  instance-postgres

#Contains the importer and exporter recipes for postgres
  instance-postgres-import
  instance-postgres-export

  instance-default-root


extends =
  ../resilient/buildout.cfg
  ../../component/apache/buildout.cfg
  ../../component/apache-php/buildout.cfg
  ../../component/dash/buildout.cfg
  ../../component/dcron/buildout.cfg
  ../../component/gzip/buildout.cfg
  ../../component/logrotate/buildout.cfg
  ../../component/lxml-python/buildout.cfg
  ../../component/postgresql/buildout.cfg
  ../../component/rdiff-backup/buildout.cfg
  ../../component/stunnel/buildout.cfg
  ../../component/dropbear/buildout.cfg
  ../slapos.cfg


#----------------
#-- Application-specific part (maarch, etc.)

[application]
recipe = hexagonit.recipe.download
strip-top-level-dir = true


#----------------
#-- Instance-level buildout profiles.

[instance]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg.in
output = ${buildout:directory}/instance.cfg
md5sum = 1aaf3ea7b14e09e66904bdb80e3cfe2f
mode = 0644

[instance-apache-php]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/apache/instance-apache-php.cfg.in
output = ${buildout:directory}/instance-apache-php.cfg
md5sum = 3e4b7c176a7de23843f77261d88dd0b8
mode = 0644

[instance-apache-backup]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/apache/instance-apache-backup.cfg.in
output = ${buildout:directory}/instance-apache-backup.cfg
md5sum = db879141c0b6a77ef8b3b7e699f5583a
mode = 0644

[template-resilient-lapp]
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/template-resilient.cfg.in
rendered = ${buildout:directory}/instance-resilient.cfg

context = key templateapache instance-apache-php:output
          key dropbear dropbear:location
          key buildout buildout:bin-directory

import-list = file parts template-parts:destination
              file replicated template-replicated:destination

md5sum = 525f50e60d0a96557a552de6afa4ab88
mode = 0644
 

[instance-postgres]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/postgres/instance-postgres.cfg.in
output = ${buildout:directory}/instance-postgres.cfg
md5sum = 9644856614d8f595d0666d76093e1031
mode = 0644

[instance-postgres-import]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/postgres/instance-postgres-import.cfg.in
output = ${buildout:directory}/instance-postgres-import.cfg
md5sum = 1989ba2164dd5f79793a04e0a02ea515
mode = 0644

[instance-postgres-export]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/postgres/instance-postgres-export.cfg.in
output = ${buildout:directory}/instance-postgres-export.cfg
md5sum = 7bce31bc22a731a8fc6119aee96586f5
mode = 0644


#----------------
#-- Postgres driver for Python recipes.

[psycopg2-env]
PATH = ${postgresql:location}/bin:%(PATH)s


[psycopg2]
recipe = zc.recipe.egg:custom
egg = psycopg2
define = PSYCOPG_EXTENSIONS,PSYCOPG_DISPLAY_SIZE,PSYCOPG_NEW_BOOLEAN,HAVE_PQFREEMEM,HAVE_PQPROTOCOL3
environment = psycopg2-env
include-dirs =
    ${postgresql:location}/include
library-dirs =
    ${postgresql:location}/lib
rpath = 
    ${postgresql:location}/lib

[instance-default-root]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-default-root.cfg.in
output = ${buildout:directory}/instance-default-root.cfg
md5sum = 53c9020f7a0b5203f976e069e455787b
mode = 0644

#----------------
#--
#-- Optional part allowing applications using this stack to run a custom
#-- instance.cfg at the end of Apache/PHP instance deployment.
#-- To use it in your application, just override those two parameters, like:

[custom-application-deployment]
# path = /path/to/instance-custom.cfg
# part-list = part1 part2
# See software/maarch/software.cfg for an example.
path =
part-list =

#----------------
#-- Dummy parts in case no application configuration file is needed

[application-template]
filename =
location =

[application-configuration]
location =

#----------------

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  ${psycopg2:egg}
  slapos.toolbox
  cns.recipe.symlink


[versions]
Jinja2 = 2.6
Werkzeug = 0.8.3
apache-libcloud = 0.11.4
async = 0.6.1
buildout-versions = 1.7
cns.recipe.symlink = 0.2.3
gitdb = 0.5.4
hexagonit.recipe.cmmi = 1.6
inotifyx = 0.2.0
lxml = 3.0.2
meld3 = 0.6.10
netaddr = 0.7.10
psycopg2 = 2.4.6
pycrypto = 2.6
pytz = 2012h
rdiff-backup = 1.0.5
slapos.recipe.download = 1.0.dev-r4053
slapos.recipe.template = 2.4.2
smmap = 0.8.2

# Required by:
# slapos.core==0.33.2-dev
# slapos.toolbox==0.32.1-dev
Flask = 0.9

# Required by:
# slapos.toolbox==0.32.1-dev
GitPython = 0.3.2.RC1

# Required by:
# slapos.toolbox==0.32.1-dev
atomize = 0.1.1

# Required by:
# slapos.toolbox==0.32.1-dev
feedparser = 5.1.3

# Required by:
# hexagonit.recipe.cmmi==1.6
hexagonit.recipe.download = 1.6

# Required by:
# slapos.core==0.33.2-dev
netifaces = 0.8

# Required by:
# slapos.toolbox==0.32.1-dev
paramiko = 1.9.0

# Required by:
# slapos.toolbox==0.32.1-dev
psutil = 0.6.1

# Required by:
# slapos.core==0.33.2-dev
pyflakes = 0.5.0

# Required by:
# cns.recipe.symlink==0.2.3
# slapos.cookbook==0.70.1-dev
# slapos.core==0.33.2-dev
# slapos.toolbox==0.32.1-dev
# supervisor==3.0b1
# zc.buildout==1.6.0-dev-SlapOS-010
# zope.interface==4.0.2
setuptools = 0.6c12dev-r88846

# Required by:
# slapos.core==0.33.2-dev
supervisor = 3.0b1

# Required by:
# slapos.toolbox==0.32.1-dev
xml-marshaller = 0.9.7

# Required by:
# slapos.core==0.33.2-dev
zope.interface = 4.0.2

