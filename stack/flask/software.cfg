# Stack for Flask microframework: http://flask.pocoo.org/
[buildout]
extends =
  ../../stack/slapos.cfg
  ../../stack/flask.cfg
  ../../component/nginx/buildout.cfg
  ../../component/dash/buildout.cfg
  ../../component/curl/buildout.cfg

parts =
  slapos-cookbook
  slapos-toolbox
  eggs
  template
  nginx
  nginx_template_launcher
  template_nginx_conf
  module_base_py
  server_base_py

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
md5sum = 9d60640c58337c9b40d11a9047044627
mode = 0644

[template-flask]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-flask.cfg
output = ${buildout:directory}/template-flask.cfg
md5sum = 9d38d13f46024625bb46a9e3c912dc17
mode = 0644

[template_nginx_conf]
recipe = slapos.recipe.download
url = ${:_profile_base_location_}/nginx_conf.in
md5sum = 53dbaa3b816a22f58ee609379cd6147e
filename = nginx_conf.in
location = ${buildout:parts-directory}/${:_buildout_section_name_}
mode = 0644

[nginx_template_launcher]
recipe = slapos.recipe.download
url = ${:_profile_base_location_}/launcher-nginx.in
md5sum = 0ca1502bddf082220e574ef867d7176b
filename = launcher-nginx.in
mode = 0644
location = ${buildout:parts-directory}/${:_buildout_section_name_}

[module_base_py]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/${:filename}
md5sum = 5ad39f196605b062e94b738da03fe91c
location = ${buildout:parts-directory}/${:_buildout_section_name_}
download-only = true
filename = __init__.py
mode = 0644

[server_base_py]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/${:filename}
md5sum = a2bf143a482d46dee421a24189a4b069
location = ${buildout:parts-directory}/${:_buildout_section_name_}
download-only = true
filename = server.py
mode = 0644

[slapos-toolbox]
recipe = zc.recipe.egg
eggs = slapos.toolbox
scripts = killpidfromfile

[eggs]
recipe = zc.recipe.egg
eggs =
  slapos.cookbook
  hexagonit.recipe.download
  Gunicorn
  
[versions]
gunicorn = 18.0
Flask = 0.10