[buildout]
versions = versions  
extends =
  ../../component/nginx/buildout.cfg
  ../../stack/lamp/buildout.cfg
  ../../stack/shacache-client.cfg

parts =
  nginx-php
  mariadb
  mydumper
  mysql-python
  rdiff-backup
  dropbear
  eggs
  instance-recipe-egg
  template
  template-apache-php
  template-mariadb
  template-mariadb-pbsready
  template-mariadb-pbsready-import
  template-mariadb-pbsready-export
  nginx
  slapos.cookbook-repository
  check-recipe

# Local development
develop =
  ${:parts-directory}/slapos.cookbook-repository

# Local development
[slapos.cookbook-repository]
recipe = plone.recipe.command
stop-on-error = true
location = ${buildout:parts-directory}/${:_buildout_section_name_}
command = ${git:location}/bin/git clone --branch wordpress-nginx --quiet http://git.erp5.org/repos/slapos.git ${:location}
update-command = cd ${:location} && GIT_COMMITTER_EMAIL=nobody@example.com GIT_AUTHOR_NAME=Nobody GIT_AUTHOR_EMAIL=nobody@example.com ${git:location}/bin/git pull --quiet

[check-recipe]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = grep parts ${buildout:develop-eggs-directory}/slapos.cookbook.egg-link


# Overwrite with local to use nginx instead apache.
[template-apache-php]
url = ${:_profile_base_location_}/instance-apache-php.cfg
md5sum = 8273d47818a3139f6d43b949f3ec4cf2 

[application]
url = http://wordpress.org/latest.tar.gz
#md5sum = Student may put here md5sum of this file, this is good idea

[application-template]
recipe = slapos.recipe.download
url = ${:_profile_base_location_}/wp-config.php.in
md5sum = 0d62b28125ca3c780db0b547199953f2
download-only = True
filename = template.in
mode = 0644
location = ${buildout:parts-directory}/${:_buildout_section_name_}

[application-configuration]
location = wp-config.php

[networkcache]
# signature certificates of the following uploaders.
#   Florian Bourse
signature-certificate-list =
  -----BEGIN CERTIFICATE-----
  MIID5TCCAs2gAwIBAgIBETANBgkqhkiG9w0BAQUFADCBhzELMAkGA1UEBhMCWFgx
  DjAMBgNVBAgMBVN0YXRlMQ0wCwYDVQQHDARDaXR5MRAwDgYDVQQKDAdDb21wYW55
  MSgwJgYDVQQDDB9BdXRvbWF0aWMgQ2VydGlmaWNhdGUgQXV0aG9yaXR5MR0wGwYJ
  KoZIhvcNAQkBFg54eEBleGFtcGxlLmNvbTAeFw0xMjA2MTUxNDUwMzZaFw0yMjA2
  MTMxNDUwMzZaMGcxCzAJBgNVBAYTAlhYMQ4wDAYDVQQIDAVTdGF0ZTEQMA4GA1UE
  CgwHQ29tcGFueTEXMBUGA1UEAwwOZmxvcmlhbi5ib3Vyc2UxHTAbBgkqhkiG9w0B
  CQEWDnh4QGV4YW1wbGUuY29tMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
  AQEArWnr9q5G1pZvHznu5bZnUGld4WFhbaWw+IOvyaz8M5SS0BONhDw3osdezOvw
  s3ZgxIzydVfaksYx2xo790MeTepsH4vtB4rGMvVHfvzUyd+qKP735irJ02sKFCbs
  Jn9hc1og3jRBkPGGj4amqWlwaifV2iyiwiyCS+GysXSWHrPL1zVVj7csBCPmpmkE
  wN9lmLj4G3L7a2DGQpj92Y1wntUCrF5BPnavpsFuiss4Pw4B7g0mClv4NhNMaQB4
  n4yELJ2vw/TVjVIUIU6x3DQp+ZhXhvRINBDHGZXZQD2wNzwxocKMHFDsQyRIW4mf
  9wY5ZWdBwlAEMhPcWnYHXMoQKwIDAQABo3sweTAJBgNVHRMEAjAAMCwGCWCGSAGG
  +EIBDQQfFh1PcGVuU1NMIEdlbmVyYXRlZCBDZXJ0aWZpY2F0ZTAdBgNVHQ4EFgQU
  EE+qClmfFhKETn1IdhDu9JbiIEIwHwYDVR0jBBgwFoAUqbbxSutH7kc4tOSx8bAH
  5vzMU5AwDQYJKoZIhvcNAQEFBQADggEBAIo1K0pq2nVh9dYRgHatw+VvqaEunH8v
  1G44z7DUKMxMaIM1dUQaKruAec4aqxHhpg1wLCHpn4LhecwXssAFb1+65rnP32+N
  n8FKrAHovRYZrRgGKqgA6tH64bd6FyJ9Erri0v7O+QKsGZHaoq3SnHs2y0y1W5pc
  YimaXNHNJcEyU0RwQTz2TnGWUU8gRk+HdgoPZboLyyEgyQxiEPgVF/nywSJQypvF
  VC/cAmh/SUfyZb17f7a88x3i6JSjrDMEHVjg/bO1AkbLItv8L86f5R47/Od5auCb
  KhlewmE6apfFNmZ1m5ByOrCoTVTC/UKinCVAt88cSX8URW3+fId69Ds=
  -----END CERTIFICATE-----

