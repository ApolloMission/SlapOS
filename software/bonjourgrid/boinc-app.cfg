[buildout]

parts  =   
  boinc-server
  certificate-authority
  ca-stunnel
  logrotate
  logrotate-entry-apache
  logrotate-entry-stunnel
  cron
  cron-entry-logrotate
  cron-entry-boinc
  promise
  slapmonitor
  slapreport
  frontend-promise
  content-promise
  publish-connection-informations
#User application
  boinc-app
#slap application
  slap-application

extends = 
  ${template-boinc:output}

[boincdirectory]
recipe = slapos.cookbook:mkdirectory
boinc = $${rootdirectory:etc}/boinc/

#Override Boinc server part with custom variables for BonjourGrid
#Change the wrapper directory to /bin/boinc/
[boinc-server]
wrapper-dir = $${boincdirectory:boinc}

#Deploy a Boinc application in existing boinc server instance. do the same thing for another boinc app instance
[boinc-app]
<= boinc-server
recipe = slapos.cookbook:boinc.app
binary = ${boinc-application:location}/${boinc-application:filename}
#app-name should be unique (for all app deployed an boinc instance)
app-name = ${boinc-application:app-name}
version = ${boinc-application:version}
platform = ${boinc-application:platform}
extension = ${boinc-application:exec-extension}
#templates
template-result = ${template_result:location}/${template_result:filename}
template-wu = ${template_wu:location}/${template_wu:filename}
#Work Unit
wu-number = ${boinc-application:wu-number}
input-file = ${template_input:location}/${template_input:filename}

