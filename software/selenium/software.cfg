[buildout]
extends = 
   ../../stack/java.cfg
   ../../component/xorg/buildout.cfg
   ../../component/lxml-python/buildout.cfg
   ../../component/python-2.7/buildout.cfg   
   ../../stack/shacache-client.cfg

#XXX-Cedric : switch to phantomjs and drop firefox and xorg
#             when phantomjs is compatible with selenium. See
#             http://code.google.com/p/phantomjs/issues/detail?id=49
#             And http://code.google.com/p/phantomjs/wiki/FAQ
#             (bottom, comment Mar 23, 2011

#XXX-Cedric: to Vivien : 
#Example of sending report to erp5 :
#http://git.erp5.org/gitweb/slapos.git/blob/HEAD:/slapos/recipe/testnode/erp5testreporthandler.py?js=1
#Example of launching unitary testing : 
#http://git.erp5.org/gitweb/erp5.git/blob/HEAD:/tests/__init__.py?js=1#l47;js=1

parts =
   selenium
   template
   libxslt
   eggs
   instance-recipe-egg
   Xserver
   xkbcomp
   xkeyboard-config

versions = versions

unzip = true

[selenium]
recipe = hexagonit.recipe.download
url = http://selenium.googlecode.com/files/selenium-server-standalone-2.1.0.jar
download-only = true
filename = selenium-server.jar

[instance-recipe]
egg = slapos.cookbook
module = selenium

[instance-recipe-egg]
recipe = zc.recipe.egg
python = python2.7
eggs = ${instance-recipe:egg}

[eggs]
recipe = zc.recipe.egg
python = python2.7
eggs =
  ${lxml-python:egg}

[template]
# Default template for the instance.
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644

[versions]
slapos.cookbook = 0.13
slapos.libnetworkcache = 0.3
erp5.recipe.cmmiforcei686 = 0.1.1
hexagonit.recipe.cmmi = 1.5.0
hexagonit.recipe.download = 1.5.0

# Required by slapos.cookbook==0.13
slapos.core = 0.2
collective.recipe.template = 1.8
netaddr = 0.7.5
xml-marshaller = 0.9.7
setuptools = 0.6c12dev-r88795

# Use SlapOS patched zc.buildout
zc.buildout = 1.5.3-dev-SlapOS-005
