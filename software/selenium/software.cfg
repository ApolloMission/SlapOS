[buildout]
extends = 
   ../../stack/java.cfg
   ../../component/xorg/buildout.cfg
   ../../component/lxml-python/buildout.cfg
   ../../component/python-2.7/buildout.cfg   
   ../../component/fontconfig/buildout.cfg
   ../../component/libpng/buildout.cfg
   ../../component/curl/buildout.cfg
   ../../stack/shacache-client.cfg

parts =
   selenium
   template
   libxslt
   eggs
   instance-recipe-egg
   Xserver
   firefox

versions = versions

unzip = true

[selenium]
recipe = hexagonit.recipe.download
url = http://selenium.googlecode.com/files/selenium-server-standalone-2.1.0.jar
download-only = true
filename = selenium-server.jar

[libMesa]
recipe = hexagonit.recipe.cmmi
url = ftp://ftp.freedesktop.org/pub/mesa/7.10/MesaLib-7.10.tar.bz2
configure-options =
  --disable-dri
environment =
  PKG_CONFIG_PATH=${libdrm:location}/lib/pkgconfig:${talloc:location}/lib/pkgconfig:${dri2proto:location}/lib/pkgconfig:${glproto:location}/lib/pkgconfig:${libexpat:location}/lib/pkgconfig
  LD_LIBRARY_PATH=${libdrm:location}/lib:${talloc:location}/lib:${dri2proto:location}/lib:${glproto:location}/lib:${libexpat:location}/lib
  LD_RUN_PATH=${libdrm:location}/lib:${talloc:location}/lib:${dri2proto:location}/lib:${glproto:location}/lib:${libexpat:location}/lib
  CPPFLAGS=-I${talloc:location}/include -I${glproto:location}/include -I${libexpat:location}/include
  PYTHONPATH=${libxml2:location}/lib/python2.6/site-packages:%(PYTHONPATH)s
  PATH=${makedepend:location}/bin:${pkgconfig:location}/bin:%(PATH)s

[libexpat]
recipe = hexagonit.recipe.cmmi
url = http://sourceforge.net/projects/expat/files/expat/2.0.1/expat-2.0.1.tar.gz/download

[glproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/proto/glproto-1.4.12.tar.bz2    

[pixman]
recipe = hexagonit.recipe.cmmi
url = http://xorg.freedesktop.org/archive/individual/lib/pixman-0.23.2.tar.bz2 

[makedepend]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/util/makedepend-1.0.3.tar.bz2

[talloc]
recipe = hexagonit.recipe.cmmi
url = http://www.samba.org/ftp/talloc/talloc-2.0.0.tar.gz

[dri2proto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/individual/proto/dri2proto-2.6.tar.bz2

[libdrm]
recipe = hexagonit.recipe.cmmi
url = http://dri.freedesktop.org/libdrm/libdrm-2.4.26.tar.bz2
environment =
  PKG_CONFIG_PATH=${pciaccess:location}/lib/pkgconfig:${xorg-libpthread-stubs:location}/lib/pkgconfig
  LD_LIBRARY_PATH=${pciaccess:location}/lib:${xorg-libpthread-stubs:location}/lib
  LD_RUN_PATH=${pciaccess:location}/lib:${xorg-libpthread-stubs:location}/lib
  PATH=${pkgconfig:location}/bin:%(PATH)s

[pciaccess]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/lib/libpciaccess-0.12.0.tar.bz2

[Xserver]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/xserver/xorg-server-1.9.3.tar.bz2
configure-options =
  --enable-xvfb
environment =
  PKG_CONFIG_PATH=${glproto:location}/lib/pkgconfig:${pixman:location}/lib/pkgconfig:${libX11:location}/lib/pkgconfig:${libMesa:location}/lib/pkgconfig:${xf86driproto:location}/lib/pkgconfig:${libdrm:location}/lib/pkgconfig:${dri2proto:location}/lib/pkgconfig:${xproto:location}/lib/pkgconfig:${xtrans:location}/share/pkgconfig:${libXau:location}/lib/pkgconfig:${xextproto:location}/lib/pkgconfig:${fixesproto:location}/lib/pkgconfig:${damageproto:location}/lib/pkgconfig:${xcmisproto:location}/lib/pkgconfig:${bigreqsproto:location}/lib/pkgconfig:${randrproto:location}/lib/pkgconfig:${renderproto:location}/lib/pkgconfig:${inputproto:location}/lib/pkgconfig:${kbproto:location}/lib/pkgconfig:${fontsproto:location}/lib/pkgconfig:${videoproto:location}/lib/pkgconfig:${compositeproto:location}/lib/pkgconfig:${recordproto:location}/lib/pkgconfig:${scrnsaverproto:location}/lib/pkgconfig:${resourceproto:location}/lib/pkgconfig:${xineramaproto:location}/lib/pkgconfig:${libxkbfile:location}/lib/pkgconfig:${libXfont:location}/lib/pkgconfig:${pciaccess:location}/lib/pkgconfig
  LD_LIBRARY_PATH=${glproto:location}/lib:${pixman:location}/lib:${libX11:location}/lib:${libMesa:location}/lib:${xf86driproto:location}/lib:${libdrm:location}/lib:${dri2proto:location}/lib:${xproto:location}/lib/:${xtrans:location}/include/:${libXau:location}/lib/:${xextproto:location}/lib/:${fixesproto:location}/lib/:${damageproto:location}/lib/:${xcmisproto:location}/lib/:${bigreqsproto:location}/lib/:${randrproto:location}/lib/:${renderproto:location}/lib/:${inputproto:location}/lib/:${kbproto:location}/lib/:${fontsproto:location}/lib/:${videoproto:location}/lib/:${compositeproto:location}/lib/:${recordproto:location}/lib/:${scrnsaverproto:location}/lib/:${resourceproto:location}/lib/:${xineramaproto:location}/lib/:${libxkbfile:location}/lib/:${libXfont:location}/lib/:${pciaccess:location}/lib
  LD_RUN_PATH=${glproto:location}/lib:${pixman:location}/lib:${libX11:location}/lib/:${libMesa:location}/lib:${xf86driproto:location}/lib:${libdrm:location}/lib:${dri2proto:location}/lib:${xproto:location}/lib/:${xtrans:location}/include/:${libXau:location}/lib/:${xextproto:location}/lib/:${fixesproto:location}/lib/:${damageproto:location}/lib/:${xcmisproto:location}/lib/:${bigreqsproto:location}/lib/:${randrproto:location}/lib/:${renderproto:location}/lib/:${inputproto:location}/lib/:${kbproto:location}/lib/:${fontsproto:location}/lib/:${videoproto:location}/lib/:${compositeproto:location}/lib/:${recordproto:location}/lib/:${scrnsaverproto:location}/lib/:${resourceproto:location}/lib/:${xineramaproto:location}/lib/:${libxkbfile:location}/lib/:${libXfont:location}/lib/:${pciaccess:location}/lib
  CPPFLAGS=-I${glproto:location}/include -I${pixman:location}/include/pixman-1 -I${libX11:location}/include/ -I${libMesa:location}/include -I${xf86driproto:location}/include -I${libdrm:location}/include -I${dri2proto:location}/include -I${xproto:location}/include/ -I${xtrans:location}/include/ -I${libXau:location}/include/ -I${xextproto:location}/include/ -I${fixesproto:location}/include/ -I${damageproto:location}/include/ -I${xcmisproto:location}/include/ -I${bigreqsproto:location}/include/ -I${randrproto:location}/include/ -I${renderproto:location}/include/ -I${inputproto:location}/include/ -I${kbproto:location}/include/ -I${fontsproto:location}/include/ -I${videoproto:location}/include/ -I${compositeproto:location}/include/ -I${recordproto:location}/include/ -I${scrnsaverproto:location}/include/ -I${resourceproto:location}/include/ -I${xineramaproto:location}/include/ -I${libxkbfile:location}/include/ -I${libXfont:location}/include/ -I${pciaccess:location}/include
  PATH=${pkgconfig:location}/bin:%(PATH)s

[xf86driproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/xf86driproto-2.1.0.tar.bz2

[fixesproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/fixesproto-4.1.2.tar.bz2

[bigreqsproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/bigreqsproto-1.1.1.tar.bz2

[xcmisproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/xcmiscproto-1.2.1.tar.bz2

[damageproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/damageproto-1.2.1.tar.bz2

[randrproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/randrproto-1.3.2.tar.bz2

[renderproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/renderproto-0.11.1.tar.bz2

[inputproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/inputproto-2.0.1.tar.bz2

[kbproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/kbproto-1.0.5.tar.bz2

[videoproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/videoproto-2.3.1.tar.bz2

[fontsproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/fontsproto-2.1.1.tar.bz2

[compositeproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/compositeproto-0.4.2.tar.bz2

[recordproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/recordproto-1.14.1.tar.bz2

[scrnsaverproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/scrnsaverproto-1.2.1.tar.bz2

[resourceproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/resourceproto-1.1.1.tar.bz2

[xineramaproto]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/xineramaproto-1.2.tar.bz2

[libxkbfile]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/libxkbfile-1.0.7.tar.bz2

[libXfont]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/libXfont-1.4.3.tar.bz2
environment =
  PKG_CONFIG_PATH=${fontsproto:location}/lib/pkgconfig:${libfontenc:location}/lib/pkgconfig:${xproto:location}/lib/pkgconfig:${xtrans:location}/share/pkgconfig
  LD_LIBRARY_PATH=${fontsproto:location}/lib:${libfontenc:location}/lib:${xtrans:location}/include/:${xproto:location}/lib/
  LD_RUN_PATH=${fontsproto:location}/lib:${libfontenc:location}/lib:${xproto:location}/lib/:${xtrans:location}/include/
  PATH=${pkgconfig:location}/bin:%(PATH)s
  
[libfontenc]
recipe = hexagonit.recipe.cmmi
url = http://www.x.org/releases/X11R7.6/src/everything/libfontenc-1.1.0.tar.bz2

[firefox]
recipe = hexagonit.recipe.cmmi
url = ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/3.6.9/source/firefox-3.6.9.source.tar.bz2

#url = ftp://ftp.mozilla.org/pub/mozilla.org/firefox/releases/5.0/source/firefox-5.0.source.tar.bz2
#configure-options =
#  --disable-webm
#  --disable-ogg
#  --disable-wave
#  --disable-libjpeg-turbo
#  --disable-necko-wifi
#  --disable-pango
#environment =
#  PKG_CONFIG_PATH=${libnotify:location}/lib/pkgconfig:${GTK:location}/lib/pkgconfig:${glib:location}/lib/pkgconfig:${cairo:location}/lib/pkgconfig:${pixman:location}/lib/pkgconfig:${fontconfig:location}/lib/pkgconfig:${freetype:location}/lib/pkgconfig:${libpng:location}/lib/pkgconfig:${libXrender:location}/lib/pkgconfig:${libX11:location}/lib/pkgconfig:${xproto:location}/lib/pkgconfig:${libxcb:location}/lib/pkgconfig:${xorg-libpthread-stubs:location}/lib/pkgconfig:#${libXau:location}/lib/pkgconfig:${atk:location}/lib/pkgconfig:${dbus-1:location}/lib/pkgconfig:${dbus-glib:location}/lib/pkgconfig:${libIDL:location}/lib/pkgconfig:${pango:location}/lib/pkgconfig:${gettext:location}/lib/pkgconfig
#  LD_LIBRARY_PATH=${libnotify:location}/lib:${GTK:location}/lib:${glib:location}/lib:${cairo:location}/lib:${pixman:location}/lib/:${fontconfig:location}/lib:${freetype:location}/lib:${libpng:location}/lib:${libXrender:location}/lib:${libX11:location}/lib:${xproto:location}/lib:${libxcb:location}/lib:${xorg-libpthread-stubs:location}/lib:${libXau:location}/lib:${atk:location}/lib:${dbus-1:location}/lib:${dbus-glib:location}/lib:${libIDL:location}/lib:${pango:location}/lib:${gettext:location}/lib/libintl.so
#  LD_RUN_PATH=${libnotify:location}/lib:${GTK:location}/lib:${glib:location}/lib:${cairo:location}/lib:${pixman:location}/lib/:${fontconfig:location}/lib:${freetype:location}/lib:${libpng:location}/lib:${libXrender:location}/lib:${libX11:location}/lib:${xproto:location}/lib:${libxcb:location}/lib:${xorg-libpthread-stubs:location}/lib:${libXau:location}/lib:${atk:location}/lib:${dbus-1:location}/lib:${dbus-glib:location}/lib:${libIDL:location}/lib:${pango:location}/lib:${gettext:location}/lib/libintl.so
#  CPPFLAGS=-I${curl:location}/include -I${libnotify:location}/include -I${GTK:location}/include -I${glib:location}/include -I${cairo:location}/include -I${pixman:location}/include/ -I${fontconfig:location}/include -I${freetype:location}/include -I${libpng:location}/include -I${libXrender:location}/include -I${libX11:location}/include -I${xproto:location}/include -I${libxcb:location}/include -I${xorg-libpthread-stubs:location}/include -I${libXau:location}/include -I${atk:location}/include -I${dbus-1:location}/include -I${dbus-glib:location}/include -I${libIDL:location}/include -I${pango:location}/include -I${gettext:location}/include
#  PATH=${pkgconfig:location}/bin:${glib:location}/bin:%(PATH)s

[libnotify]
recipe = hexagonit.recipe.cmmi
url = http://www.galago-project.org/files/releases/source/libnotify/libnotify-0.4.5.tar.bz2

[GTK]
recipe = hexagonit.recipe.cmmi
url = http://ftp.gnome.org/pub/gnome/sources/gtk+/2.20/gtk+-2.20.0.tar.bz2

[cairo]
recipe = hexagonit.recipe.cmmi
url = http://cairographics.org/releases/cairo-1.10.2.tar.gz

[pango]
recipe = hexagonit.recipe.cmmi
url = http://ftp.gnome.org/pub/gnome/sources/pango/1.20/pango-1.20.0.tar.bz2

[libXrender]
recipe = hexagonit.recipe.cmmi
url = http://xlibs.freedesktop.org/release/libXrender-0.9.0.tar.bz2
environment =
  PKG_CONFIG_PATH=${render:location}/lib/pkgconfig
  LD_LIBRARY_PATH=${render:location}/lib
  LD_RUN_PATH=${render:location}/lib
  PATH=${pkgconfig:location}/bin:%(PATH)s

[render]
recipe = hexagonit.recipe.cmmi
url = http://xlibs.freedesktop.org/release/renderext-0.9.tar.bz2

[atk]
recipe = hexagonit.recipe.cmmi
url = http://ftp.acc.umu.se/pub/gnome/sources/atk/2.0/atk-2.0.0.tar.bz2

[dbus-1]
recipe = hexagonit.recipe.cmmi
url = http://dbus.freedesktop.org/releases/dbus/dbus-1.4.10.tar.gz

[dbus-glib]
recipe = hexagonit.recipe.cmmi
url = http://dbus.freedesktop.org/releases/dbus-glib/dbus-glib-0.90.tar.gz

[libIDL]
recipe = hexagonit.recipe.cmmi
url = http://ftp.gnome.org/pub/gnome/sources/libIDL/0.8/libIDL-0.8.0.tar.bz2
environment =
  PKG_CONFIG_PATH=${bison:location}/lib/pkgconfig:${glib:location}/lib/pkgconfig
  LD_LIBRARY_PATH=${bison:location}/lib:${glib:location}/lib
  LD_RUN_PATH=${bison:location}/lib:${glib:location}/lib
  PATH=${pkgconfig:location}/bin:${bison:location}/bin:%(PATH)s
  
[bison]
recipe = hexagonit.recipe.cmmi
url = http://ftp.gnu.org/gnu/bison/bison-2.3.tar.bz2

[instance-recipe]
egg = slapos.cookbook
module = selenium

[instance-recipe-egg]
recipe = zc.recipe.egg
python = python2.7
eggs = ${instance-recipe:egg}

[eggs]
recipe = zc.recipe.egg
python = python2.7
eggs =
  ${lxml-python:egg}

[template]
# Default template for the instance.
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644

[versions]
slapos.cookbook = 0.13

erp5.recipe.cmmiforcei686 = 0.1.1
hexagonit.recipe.cmmi = 1.5.0
hexagonit.recipe.download = 1.5.0

# Required by slapos.cookbook==0.13
slapos.core = 0.2
collective.recipe.template = 1.8
netaddr = 0.7.5
xml-marshaller = 0.9.7
setuptools = 0.6c12dev-r88795

# Use SlapOS patched zc.buildout
zc.buildout = 1.5.3-dev-SlapOS-005