[buildout]

extends =
  ../../stack/slapos.cfg
  ../../component/powerdns/buildout.cfg
# Monitoring stack
  ../../stack/monitor/buildout.cfg

parts =
  template
  slapos-cookbook
  monitor-eggs
  eggs

[eggs]
recipe = zc.recipe.egg
eggs =
  plone.recipe.command

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
#md5sum = 5c22b1e0fe601255ebf19adf6093489f
output = ${buildout:directory}/template.cfg
mode = 0644

[template-powerdns]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-powerdns.cfg
#md5sum = 05216295ad8ab5ebf34644ac253f0db6
output = ${buildout:directory}/template-powerdns.cfg
mode = 0644

[template-pdns-configuration]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/template/pdns.conf.jinja2
#md5sum = 72922908c1f4e72c92bb03e072660c7c
mode = 640

[template-dns-replicate]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/instance-powerdns-replicate.cfg.jinja2
#md5sum = 5de85259870dc4364954018041561882
mode = 0644

[iso-list]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/zz.countries.nexedi.dk.rbldnsd
#md5sum = 950a19be225a25309a3bda3f61fb5f6a
location = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = zz.countries.nexedi.dk.rbldnsd
download-only = true
mode = 0644

[template-cdn-conf]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/cdn.conf.in
#md5sum = 950a19be225a25309a3bda3f61fb5f6a
location = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = cdn.conf.in
download-only = true
mode = 0644
