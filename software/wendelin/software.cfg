[buildout]
versions = versions
extends =
  ../../software/ipython_notebook/software.cfg
  ../../component/fluentd/buildout.cfg
  ../../component/matplotlib/buildout.cfg
  ../../component/ipython/buildout.cfg
  ../../component/pandas/buildout.cfg
  ../../component/wendelin.core/buildout.cfg
  ../../component/msgpack-python/buildout.cfg
  ../../component/scipy/buildout.cfg
  ../../component/scikit-learn/buildout.cfg
  ../../software/erp5/software.cfg
parts +=
  slapos-cookbook
  slapos-cookbook-develop
  wendelin
  jupyter-wendelin
  ipython-notebook
  scipy
  scikit-learn
  pandas
  msgpack-python
  ipython
  wendelin.core
  matplotlib
  fluentd
  instance

[eggs]
initialization =
  import scipy.stats # load our own libstdc++ explicitly at the very beginning
extra-paths +=
  ${wendelin:location}
eggs +=
  cns.recipe.symlink
  ${scikit-learn:egg}
  ${scipy:egg}
  ${pandas:egg}
  ${msgpack-python:egg}
  ${wendelin.core:egg}
  ${ipython:egg}
  ${matplotlib:egg}

[slapos.cookbook-repository]
recipe = slapos.recipe.build:gitclone
repository = http://git.erp5.org/repos/slapos.git
branch = jupyter_wendelin

[erp5_repository_list]
repository_id_list += wendelin

[local-bt5-repository]
# we need to override it to add extra repositories for wendelin
list = ${erp5:location}/bt5 ${erp5:location}/product/ERP5/bootstrap ${wendelin:location}/bt5/ ${jupyter-wendelin:location}/bt5/ 
bt5_list = erp5_full_text_myisam_catalog erp5_configurator_standard erp5_configurator_maxma_demo erp5_configurator_ung erp5_configurator_run_my_doc erp5_configurator_ebusiness_lotse erp5_wendelin_configurator erp5_data_notebook

[wendelin]
<= erp5
repository = https://lab.nexedi.com/nexedi/wendelin.git
branch = master

## TODO; Change the branch to master after merging erp5-data-notebook to master
[jupyter-wendelin]
<= erp5
repository = https://lab.nexedi.cn/tiwariayush/erp5.git
branch = erp5-data-notebook

[instance]
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/instance.cfg.in
rendered = ${buildout:directory}/template.cfg
md5sum = 42dc0a4e4c40acce0284eca264e1cb8c
mode = 0644
context =
  key slapos_core_version versions:slapos.core
  key bin_directory buildout:bin-directory
  key develop_eggs_directory buildout:develop-eggs-directory
  key eggs_directory buildout:eggs-directory
  key template_publish_information template-publish-information:target
  key template_default template-default:target
  key template_erp5_cluster template-erp5-cluster:rendered
  key template_jupyter template-jupyter:rendered

[template-erp5-cluster]
<= template
rendered = ${buildout:directory}/template-erp5-cluster.cfg

[template-jupyter]
<= instance-jupyter
rendered = ${buildout:directory}/template-jupyter.cfg

[template-default]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/instance-default.cfg.in
md5sum = b4c789dc96c6a62e62ac33e98b114043
mode = 0644

[template-publish-information]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/template/publish-default-information.cfg.in
md5sum = ab217c0f8d8290c4ccf1fcea4273a6fe
mode = 0644

[versions]
scikit-learn = 0.16.1
scipy = 0.15.1
pandas = 0.16.1
msgpack-python = 0.4.6
numpy = 1.9.2
wendelin.core = 0.5
ipython = 3.2.0
matplotlib = 1.4.3
