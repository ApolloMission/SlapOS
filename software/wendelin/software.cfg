[buildout]
versions = versions
extends =
  ../../stack/slapos.cfg
  ../../stack/monitor/buildout.cfg
  ../../component/fluentd/buildout.cfg
  ../../component/matplotlib/buildout.cfg
  ../../component/ipython/buildout.cfg
  ../../component/pandas/buildout.cfg
  ../../component/wendelin.core/buildout.cfg
  ../../component/msgpack-python/buildout.cfg
  ../../component/scipy/buildout.cfg
  ../../component/scikit-learn/buildout.cfg
  ../../component/pandas/buildout.cfg
  ../../component/manpy/buildout.cfg
  ../../software/erp5/software.cfg
parts +=
  slapos-cookbook
  slapos-cookbook-develop
  wendelin
  jupyter_wendelin
  scipy
  scikit-learn
  pandas
  msgpack-python
  ipython
  wendelin.core
  matplotlib
  fluentd
  ipython_notebook
  template-notebook
  template-default
  template-erp5-cluster
  instance

[ipython_notebook]
; In the ipython notebook software, we use more eggs than in the minimal
; ipython notebook component
eggs +=
  requests
  ${manpy:eggs}
  ${scikit-learn:egg}
  ${scipy:egg}
  ${pandas:egg}
  ${msgpack-python:egg}
  ${wendelin.core:egg}
  ${ipython:egg}
  ${matplotlib:egg}
initialization +=
  ${manpy:initialization}

[slapos.cookbook-repository]
recipe = slapos.recipe.build:gitclone
repository = http://git.erp5.org/repos/slapos.git
branch = wendelin_notebook

[eggs]
initialization =
  import scipy.stats # load our own libstdc++ explicitly at the very beginning
extra-paths +=
  ${wendelin:location}
eggs +=
  cns.recipe.symlink
  ${scikit-learn:egg}
  ${scipy:egg}
  ${pandas:egg}
  ${msgpack-python:egg}
  ${wendelin.core:egg}
  ${ipython:egg}
  ${matplotlib:egg}

[erp5_repository_list]
repository_id_list += wendelin

[local-bt5-repository]
# we need to override it
list = ${erp5:location}/bt5 ${erp5:location}/product/ERP5/bootstrap ${wendelin:location}/bt5/ ${jupyter_wendelin:location}/bt5/
bt5_list = erp5_full_text_myisam_catalog erp5_configurator_standard erp5_configurator_maxma_demo erp5_configurator_ung erp5_configurator_run_my_doc erp5_configurator_ebusiness_lotse erp5_wendelin_configurator erp5_data_notebook

[wendelin]
<= erp5
repository = https://lab.nexedi.cn/nexedi/wendelin.git
branch = master

[jupyter_wendelin]
<= erp5
repository = https://lab.nexedi.cn/tiwariayush/erp5.git
branch = erp5-data-notebook

[ipython_notebook_config]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/${:filename}
download-only = true
destination = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = ipython_notebook_config.py.jinja
mode = 0644
md5sum = f10b145fb15a35ffd6b3d1a6ecfef86f

[ipython_notebook_set_password]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/${:filename}
download-only = true
destination = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = ipython_set_password.py.jinja
mode = 0644
md5sum = ffd4b98e4665ce7ea52cdaec02aefa4e

[erp5-kernel]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/${:filename}
download-only = true
destination = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = ERP5kernel.py.jinja
mode = 0644
md5sum = 2508d67bec241e27e0c696a61f325876

[kernel-json]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/${:filename}
download-only = true
destination = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = kernel.json.jinja
mode = 0644
md5sum = ab6e78ea20855e07d388b5b86d1770fe

[custom-js]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/template/${:filename}
download-only = true
destination = ${buildout:parts-directory}/${:_buildout_section_name_}
filename = custom.js.jinja
mode = 0644
md5sum = 4a3686e221370e5f7fc930409cca49d0

[instance]
recipe = slapos.recipe.template:jinja2
template = ${:_profile_base_location_}/instance.cfg.in
rendered = ${buildout:directory}/template.cfg
mode = 0644
md5sum = 01406027e623ce3aafb1febb9fd1dae5
context =
    key slapos_core_version versions:slapos.core
    key bin_directory buildout:bin-directory
    key develop_eggs_directory buildout:develop-eggs-directory
    key eggs_directory buildout:eggs-directory
    key template_notebook template-notebook:target
    key template_default template-default:target
    key template_erp5_cluster template-erp5-cluster:rendered
    key template_publish_information template-publish-information:target
    key monitor_template monitor-template:output
    key openssl_output openssl-output:openssl
    key ipython_notebook_config_location ipython_notebook_config:location
    key ipython_notebook_config_filename ipython_notebook_config:filename
    key ipython_notebook_set_password_location ipython_notebook_set_password:location
    key ipython_notebook_set_password_filename ipython_notebook_set_password:filename
    key erp5_kernel_location erp5-kernel:location
    key erp5_kernel_filename erp5-kernel:filename
    key kernel_json_location kernel-json:location
    key kernel_json_filename kernel-json:filename
    key custom_js_location custom-js:location
    key custom_js_filename custom-js:filename

[template-erp5-cluster]
<= template
#recipe = slapos.recipe.template:jinja2
#template = ${:_profile_base_location_}/../../stack/erp5/instance.cfg.in
rendered = ${buildout:directory}/template-erp5-cluster.cfg

[template-notebook]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/instance-notebook.cfg.in
md5sum = ecd2a8eb1a0f9d87357f4b7442b3d78a
mode = 644

[template-default]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/instance-default.cfg.in
md5sum = d9a6c2ed8b165e5f1c28e04c73227a19
mode = 644

[template-publish-information]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/template/publish-default-information.cfg.in
mode = 644
md5sum = ca49685a82883538346361cc0a1fee22

[versions]
PyRSS2Gen = 1.1
cns.recipe.symlink = 0.2.3
matplotlib = 1.4.3
mistune = 0.5.1
nose = 1.3.6
pandas = 0.16.1
pyzmq = 14.6.0
scikit-learn = 0.16.1
scipy = 0.15.1
pandas = 0.16.1
msgpack-python = 0.4.6
numpy = 1.9.2
wendelin.core = 0.4
ipython = 3.2.0
matplotlib = 1.4.3
simpy = 3.0.7
terminado = 0.5
tornado = 4.1

# Required by:
# dream==0.0.1
# MySQL-python = 1.2.5

# Required by:
# tornado==4.1
# backports.ssl-match-hostname = 3.4.0.2

# Required by:
# tornado==4.1
certifi = 2015.4.28

# Required by:
# matplotlib==1.4.3
mock = 1.0.1

# Required by:
# dream==0.0.1
# numpy = 1.9.2

# Required by:
# terminado==0.5
ptyprocess = 0.4

# Required by:
# dream==0.0.1
pydot = 1.0.28

# Required by:
# matplotlib==1.4.3
# pandas==0.16.0
python-dateutil = 2.4.2

# Required by:
# dream==0.0.1
rpy2 = 2.5.6

# Required by:
# rpy2==2.5.6
singledispatch = 3.4.0.3

# Required by:
# dream==0.0.1
tablib = 0.10.0

# Required by:
# dream==0.0.1
xlrd = 0.9.3

# Required by:
# dream==0.0.1
xlwt = 1.0.0

# Required by:
# dream==0.0.1
zope.dottedname = 4.1.0
