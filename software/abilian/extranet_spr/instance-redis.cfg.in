[buildout]

parts =
  publish-redis-connection-parameters
  redis


[redis-requirepass]
recipe = slapos.cookbook:generate.password
storage-path = $${directories:etc}/redis_requirepass
bytes = 16


[redis]
recipe = slapos.cookbook:redis.server
server_bin = ${redis:location}/bin/redis-server
ipv6 = $${instance-parameters:ipv6-random}
port = 6379
pid_file = $${directories:run}/redis.pid
server_dir = $${directories:srv}
requirepass = $${redis-requirepass:passwd}
config_file = $${directories:etc}/redis.conf
log_file = $${directories:log}/redis.log
wrapper = $${directories:services}/redis_server
promise_wrapper = $${directories:promises}/redis
promise_requirepass_file = $${redis-requirepass:storage-path}

## Send informations to SlapOS Master
#[publish-redis-connection-parameters]
#recipe = slapos.cookbook:publish
#redis_ip = $${redis:ipv6}
#redis_port = $${redis:port}

