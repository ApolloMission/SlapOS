[buildout]
extends =
   ../../stack/slapos.cfg
   ../../component/git/buildout.cfg

parts =
  slapos-cookbook
  netdrive-usage-report
  instance-template
  slapos.core-repository
  check-recipe

develop =
  ${:parts-directory}/slapos.core-repository


[slapos.core-repository]
recipe = slapos.recipe.build:gitclone
repository = http://git.erp5.org/repos/slapos.core.git
branch = httplib2
git-executable = ${git:location}/bin/git


[netdrive-usage-report]
recipe = zc.recipe.egg
eggs =
  slapos.core
  lxml
  zc.buildout
  netdrive >= 0.1.3


[instance-template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg.in
output = ${buildout:directory}/instance.cfg
mode = 0644


[check-recipe]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command =
  grep parts ${buildout:develop-eggs-directory}/slapos.core.egg-link


[versions]
slapos.core =
