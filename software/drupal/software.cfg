[buildout]

extends =
  ../../stack/lamp/buildout.cfg

develop =
  /opt/slapdev

parts +=
  pear-modules


[application]
recipe = slapos.recipe.build:download-unpacked
url = http://ftp.drupal.org/files/projects/drupal-7.16.tar.gz
md5sum = 352497b2df94b5308e31cb8da020b631

[application-template]
recipe = slapos.recipe.download
url = ${:_profile_base_location_}/settings.php.in
md5sum = b4dfbdb950c25c93a8c3f9f78e9bff6e
download-only = True
filename = template.in
mode = 0644
location = ${buildout:parts-directory}/${:_buildout_section_name_}

[application-configuration]
location = sites/default/settings.php

[custom-application-deployment]
path = ${custom-application-deployment-template:output}
part-list = drupal-init


[custom-application-deployment-template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-custom.cfg.in
output = ${buildout:directory}/instance-custom.cfg
md5sum = bd071532528120f5da1fb6050d4c80e8
mode = 0644


[pear-modules]
recipe = cp.recipe.cmd
pear = ${apache-php:location}/bin/pear
install_cmd =
    ${:pear} channel-info pear.drush.org >/dev/null || ${:pear} channel-discover pear.drush.org
    ${:pear} info drush/drush >/dev/null || ${:pear} install drush/drush
    ${:pear} info Console_Table >/dev/null || ${:pear} install Console_Table

