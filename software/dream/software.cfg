[buildout]

extends = 
  ../../stack/slapos.cfg
  ../../component/git/buildout.cfg
  ../../component/gcc/buildout.cfg
  ../../component/libatlas/buildout.cfg
  ../../component/libblas/buildout.cfg

parts =
  python2.7-virtualenv
  eggs
  gcc-fortran
  libatlas
  libblas

#  scikit-env

# XXX ideally, libatlas should use this version
#[gcc-download]
#url = http://www.mirrorservice.org/sites/sourceware.org/pub/gcc/releases/gcc-4.7.0/gcc-4.7.0.tar.bz2
#md5sum = 2a0f1d99fda235c29d40b561f81d9a77

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  slapos.cookbook
  collective.recipe.template


[scikit-env]
recipe = cp.recipe.cmd
location = ${buildout:parts-directory}/${:_buildout_section_name_}
install_cmd =
  mkdir -p ${:location}
  cd ${:location}
  unset PYTHONPATH
  ${python2.7-virtualenv:executable} ${:location}
  . ${:location}/bin/activate
  export ATLAS=${libatlas:location}/lib/libsatlas.so
  #pip install -U setuptools
  #pip install -U pip
  pip install numpy
  pip install simpy==2.3
  pip install scipy
  pip install scikit-learn
  pip install xlrd
  pip install xlwt
  pip install flask
  pip install pyparsing==1.5.7
  pip install pydot
  #export LDFLAGS="-lncurses"
  pip install rpy2
  git clone http://git.erp5.org/repos/dream.git -b marco
  cd dream
  python setup.py install


[versions]
cp.recipe.cmd = 0.5nxd001
