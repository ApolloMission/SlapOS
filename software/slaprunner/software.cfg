[buildout]
extensions =
  buildout-versions

extends =
  ../../stack/flask.cfg
  ../../stack/shacache-client.cfg
  ../../component/dropbear/buildout.cfg
  ../../component/git/buildout.cfg

develop = 
  ${:parts-directory}/slapos.cookbook

parts =
  template
  slapos.cookboox
  check-local-eggs
  eggs
  instance-recipe-egg
  dropbear

find-links +=
  http://www.nexedi.org/static/packages/source/slapos.buildout/

versions = versions

[instance-recipe]
egg = slapos.cookbook
module = slaprunner

[instance-recipe-egg]
recipe = zc.recipe.egg
python = python2.7
eggs = ${instance-recipe:egg}

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644
md5sum = cd69efd5c3a7e9adca7387b9a401590a

[slapos.cookbook]
# use official egg from pypi when it is released
recipe = plone.recipe.command
stop-on-error = true
commit = ce891b5070073d4dac9e21b089b8e662c7a9e0bd
repository = http://git.erp5.org/repos/slapos.git
location = ${buildout:parts-directory}/${:_buildout_section_name_}
git-binary = ${git:location}/bin/git
command = export GIT_SSL_NO_VERIFY=true; (${:git-binary} clone --quiet ${:repository} ${:location} && cd ${:location} && ${:git-binary} reset --hard ${:commit}) || (rm -fr ${:location}; exit 1)
update-command =

[check-local-eggs]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = grep parts ${buildout:develop-eggs-directory}/slapos.cookbook.egg-link
depends = ${instance-recipe:egg}

[eggs]
eggs +=
  slapos.libnetworkcache
  slapos.toolbox
  slapos.core

[versions]
# Use SlapOS patched zc.buildout
zc.buildout = 1.6.0-dev-SlapOS-003

# Pinned to old version (2.4 does not compile well everywhere)
pycrypto = 2.3

Jinja2 = 2.6
Werkzeug = 0.8.2
apache-libcloud = 0.7.1
async = 0.6.1
buildout-versions = 1.7
gitdb = 0.5.4
hexagonit.recipe.cmmi = 1.5.0
meld3 = 0.6.8
plone.recipe.command = 1.1 
slapos.libnetworkcache = 0.11
slapos.recipe.template = 2.2
slapos.toolbox = 0.16
smmap = 0.8.2

# Required by:
# slapos.core==0.21
Flask = 0.8

# Required by:
# slapos.toolbox==0.16
GitPython = 0.3.2.RC1

# Required by:
# slapos.cookbook==0.39-dev
PyXML = 0.8.4

# Required by:
# slapos.toolbox==0.16
atomize = 0.1.1

# Required by:
# slapos.toolbox==0.16
feedparser = 5.1

# Required by:
# hexagonit.recipe.cmmi==1.5.0
hexagonit.recipe.download = 1.5.0

# Required by:
# slapos.cookbook==0.39-dev
inotifyx = 0.2.0

# Required by:
# slapos.cookbook==0.39-dev
# slapos.core==0.21
# xml-marshaller==0.9.7
lxml = 2.3.3

# Required by:
# slapos.cookbook==0.39-dev
netaddr = 0.7.6

# Required by:
# slapos.core==0.21
netifaces = 0.6

# Required by:
# slapos.toolbox==0.16
paramiko = 1.7.7.1

# Required by:
# slapos.toolbox==0.16
psutil = 0.4.1

# Required by:
# slapos.cookbook==0.39-dev
# slapos.core==0.21
# slapos.libnetworkcache==0.11
# slapos.toolbox==0.16
# supervisor==3.0a12
# zc.buildout==1.6.0-dev-SlapOS-003
# zc.recipe.egg==1.3.2
# zope.interface==3.8.0
setuptools = 0.6c12dev-r88846

# Required by:
# slapos.cookbook==0.39-dev
slapos.core = 0.21

# Required by:
# slapos.core==0.21
supervisor = 3.0a12

# Required by:
# slapos.cookbook==0.39-dev
xml-marshaller = 0.9.7

# Required by:
# slapos.cookbook==0.39-dev
zc.recipe.egg = 1.3.2

# Required by:
# slapos.core==0.21
zope.interface = 3.8.0
