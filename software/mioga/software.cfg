[buildout]
develop =
  /srv/slapgrid/slappart9/srv/runner/project/slapos
  /opt/slapdev_build

extends =
  ../../component/apache-perl/buildout.cfg
  ../../component/perl-Crypt-SSLeay/buildout.cfg
  ../../component/perl-XML-Parser/buildout.cfg
  ../../component/perl-XML-LibXML/buildout.cfg
  ../../component/perl-XML-LibXSLT/buildout.cfg
  ../../component/perl-Term-ReadLine-Gnu/buildout.cfg
  ../../component/perl-Text-Iconv/buildout.cfg
  ../../component/perl-Image-Magick/buildout.cfg
  ../../component/postgresql/buildout.cfg
  ../../component/perl-DBD-Pg/buildout.cfg
  ../../component/perl-Search-Xapian/buildout.cfg
  ../../component/libxslt/buildout.cfg
  ../../component/lxml-python/buildout.cfg
  ../../stack/slapos.cfg

parts = 
  eggs
  apache-perl
  template
  perl-Apache2-Request
  perl-Crypt-SSLeay
  perl-DBD-Pg
  perl-XML-Parser
  perl-XML-LibXML
  perl-XML-LibXSLT
  perl-Term-ReadLine-Gnu
  perl-Text-Iconv
  perl-Image-Magick
  perl-String-Checker-mioga
  perl-Search-Xapian
  cpan-simple-modules
  mioga

[eggs]
recipe = zc.recipe.egg
eggs =
  ${lxml-python:egg}
  slapos.cookbook

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
# md5sum = 
output = ${buildout:directory}/template.cfg
mode = 0644

[template-apacheperl]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-apacheperl.cfg
# md5sum = 
output = ${buildout:directory}/template-apacheperl.cfg
mode = 0644

[cpan-simple-modules]
recipe = slapos.recipe.build:cpan
modules =
  S/ST/STBEY/Date-Calc-6.3.tar.gz
  D/DC/DCOPPIT/Benchmark-Timer-0.7102.tar.gz
  R/RB/RBOW/Date-ICal-2.678.tar.gz
  S/SB/SBECK/Date-Manip-6.34.tar.gz
  G/GB/GBARR/TimeDate-1.20.tar.gz
  S/SH/SHLOMIF/Error-0.17018.tar.gz
  P/PA/PARDUS/File-MimeInfo/File-MimeInfo-0.16.tar.gz
  O/OV/OVID/HTML-TokeParser-Simple-3.15.tar.gz
  D/DS/DSKOLL/MIME-tools-5.503.tar.gz
  C/CO/COSIMO/HTTP-DAV-0.47.tar.gz
  M/MA/MARSCHAP/perl-ldap-0.48.tar.gz
  F/FD/FDESAR/Parse-Yapp-1.05.tar.gz
  S/SN/SNOWHARE/Unicode-MapUTF8-1.11.tar.gz
  G/GA/GAAS/Unicode-String-2.09.tar.gz
  T/TY/TYEMQ/Algorithm-Diff-1.1902.tar.gz
  J/JG/JGMYERS/Encode-Detect-1.01.tar.gz
  G/GU/GUIDO/libintl-perl-1.20.tar.gz
  K/KE/KEN/XML-XML2JSON-0.06.tar.gz
  A/AR/ARISTOTLE/XML-Atom-SimpleFeed-0.86.tar.gz
  P/PE/PETDANCE/Test-WWW-Mechanize-1.44.tar.gz
  G/GR/GRANTM/XML-Simple-2.20.tar.gz
  A/AD/ADAMK/Archive-Zip-1.30.tar.gz
  D/DU/DURIST/Proc-ProcessTable-0.45.tar.gz
perl = perl
cpan-configuration =
  makepl_arg=''
  make_arg=''

[perl-String-Checker-mioga]
recipe = hexagonit.recipe.cmmi
depends =
  ${perl:version}
url = http://packages.alixen.org/contribs/String-Checker-0.03.tar.gz
md5sum = c750a33505609544f95eace7a2896c84
configure-command =
  ${perl:location}/bin/perl Makefile.PL

[mioga]
recipe = hexagonit.recipe.cmmi
url = http://www.alixen.org/attachments/download/87/Mioga2-2.4.14.tar.gz
md5sum = 8282ae4b93fcea3f346168e6a855f65c
environment =
  PATH=${libxslt:location}/bin:${libxml2:location}/bin:%(PATH)s
patch-options = -p1
patches =
  ${mioga-patch:location}/${mioga-patch:filename}
# post-make-hook = ${mioga-postmakehook:location}/${mioga-postmakehook:filename}:post_make_hook
pre-configure-hook = ${mioga-hooks:location}/${mioga-hooks:filename}:pre_configure_hook
configure-command =
  ${perl:location}/bin/perl Makefile.PL

[mioga-patch]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/${:filename}
# md5sum = b836ad89902d1ea68b091a5b9800edd8
download-only = true
filename = ${:_buildout_section_name_}

[mioga-hooks]
recipe = hexagonit.recipe.download
url = ${:_profile_base_location_}/${:filename}
# md5sum = c7ceec7788749238cb5fbe09beb647b1
download-only = true
filename = mioga-hooks.py

[networkcache]
# Cedric de Saint Martin signature certificate
signature-certificate-list =
  -----BEGIN CERTIFICATE-----
  MIIB9jCCAV+gAwIBAgIJAO4V/jiMoICoMA0GCSqGSIb3DQEBBQUAMBMxETAPBgNV
  BAMMCENPTVAtMjMyMCAXDTEyMDIxNjExMTAyM1oYDzIxMTIwMTIzMTExMDIzWjAT
  MREwDwYDVQQDDAhDT01QLTIzMjCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEA
  wi/3Z8W9pUiegUXIk/AiFDQ0UJ4JFAwjqr+HSRUirlUsHHT+8DzH/hfcTDX1I5BB
  D1ADk+ydXjMm3OZrQcXjn29OUfM5C+g+oqeMnYQImN0DDQIOcUyr7AJc4xhvuXQ1
  P2pJ5NOd3tbd0kexETa1LVhR6EgBC25LyRBRae76qosCAwEAAaNQME4wHQYDVR0O
  BBYEFMDmW9aFy1sKTfCpcRkYnP6zUd1cMB8GA1UdIwQYMBaAFMDmW9aFy1sKTfCp
  cRkYnP6zUd1cMAwGA1UdEwQFMAMBAf8wDQYJKoZIhvcNAQEFBQADgYEAskbFizHr
  b6d3iIyN+wffxz/V9epbKIZVEGJd/6LrTdLiUfJPec7FaxVCWNyKBlCpINBM7cEV
  Gn9t8mdVQflNqOlAMkOlUv1ZugCt9rXYQOV7rrEYJBWirn43BOMn9Flp2nibblby
  If1a2ZoqHRxoNo2yTmm7TSYRORWVS+vvfjY=
  -----END CERTIFICATE-----
