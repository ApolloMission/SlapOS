
[buildout]
extends = 
 ../../component/slapos/buildout.cfg
 ../../component/git/buildout.cfg

develop = 
  ${:parts-directory}/slapos.core-repository

parts += slapos.core-repository
         check-recipe
         runTestSuite

[runTestSuite]
recipe = 
   zc.recipe.testrunner

eggs = 
   slapos.core

# slapos.core do not use python convention to find the
# tests.
defaults = ['--tests-pattern', '$', '-v']

# Local development
[slapos.core-repository]
recipe = plone.recipe.command
stop-on-error = true
location = ${buildout:parts-directory}/${:_buildout_section_name_}
command = ${git:location}/bin/git clone --quiet http://git.erp5.org/repos/slapos.core.git ${:location}
update-command = cd ${:location} && ${git:location}/bin/git pull --quiet

[check-recipe]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = grep parts ${buildout:develop-eggs-directory}/slapos.core.egg-link

[template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/instance.cfg
md5sum = 
mode = 640

