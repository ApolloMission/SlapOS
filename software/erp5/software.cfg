[buildout]
extends =
  ../../stack/shacache-client.cfg
  ../../stack/erp5.cfg

versions = versions

# Local development
develop =
  ${:parts-directory}/slapos.cookbook-repository
  ${:parts-directory}/z2loganalyser-repository
parts +=
# Local development
  slapos.cookbook-repository
  check-recipe
  z2loganalyser-repository
  check-z2loganalyser
# Create instance template
  template
  validator

# XXX: Workaround of SlapOS limitation
# Unzippig of eggs is required, as SlapOS do not yet provide nicely working
# development / fast switching environment for whole software
unzip = true

# Local development
[slapos.cookbook-repository]
recipe = plone.recipe.command
stop-on-error = true
location = ${buildout:parts-directory}/${:_buildout_section_name_}
repository = https://saneftestbot:kucahS5oav6jahch@git.erp5.org/repos/slapos/sanef.git
branch = master
# Note: GIT_SSL_NO_VERIFY is used as SlapOS OpenSSL configuration does not
# contain master certificates to verify.
revision = 9005805e682a9c9c614171c6638c295cb3a80097
command = (GIT_SSL_NO_VERIFY=1 ${git:location}/bin/git clone --quiet -b ${:branch} ${:repository} ${:location}) && if [ -n ${:revision} ]; then cd ${:location} && (GIT_SSL_NO_VERIFY=1 ${git:location}/bin/git reset --quiet --hard ${:revision}) ; fi
update-command = cd ${:location} && (GIT_SSL_NO_VERIFY=1 ${git:location}/bin/git pull --quiet) && if [ -n ${:revision} ]; then cd ${:location} && (GIT_SSL_NO_VERIFY=1 ${git:location}/bin/git reset --quiet --hard ${:revision}) ; fi

[check-recipe]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = grep parts ${buildout:develop-eggs-directory}/slapos.cookbook.egg-link

[z2loganalyser-repository]
recipe = plone.recipe.command
svn_param =--trust-server-cert --no-auth-cache --non-interactive --quiet -r 45666
svn = ${subversion:location}/bin/svn
location = ${buildout:parts-directory}/${:_buildout_section_name_}
stop-on-error = true
update-command = ${:command}
command =
  ${:svn} checkout ${:svn_param} https://svn.erp5.org/repos/public/erp5/trunk/utils/z2loganalyser/ ${:location} || exit 1

[check-z2loganalyser]
recipe = plone.recipe.command
stop-on-error = true
update-command = ${:command}
command = grep parts ${buildout:develop-eggs-directory}/z2loganalyser.egg-link

[template-mariadb]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-mariadb.cfg
md5sum = 1927f2c38cffc72871f8ef97682439b3
output = ${buildout:directory}/template-mariadb.cfg
mode = 0644

[template-mariadb-prod]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-mariadb-prod.cfg
md5sum = 41230d9259dd3ec62d33e6beabcd7cfa
output = ${buildout:directory}/template-mariadb-prod.cfg
mode = 0644

[template-sphinx]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-sphinx.cfg
md5sum = b6d196fb9014222dacef13a0d12a445d
output = ${buildout:directory}/template-sphinx.cfg
mode = 0644

[template-zope]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-zope.cfg
md5sum = 7c2d67cdcd49db3ce866d501a466f9c7
output = ${buildout:directory}/template-zope.cfg
mode = 0644

[template-cloudooo]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-cloudooo.cfg
md5sum = e7698a0537785339e249bdc57f369e93
output = ${buildout:directory}/template-cloudooo.cfg
mode = 0644

[template-snippet-fontconfig]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/snippet-fontconfig.cfg
md5sum = 76c5d4cd1c8d48648684d9873f1ffed3
output = ${buildout:directory}/template-snippet-fontconfig.cfg
mode = 0644

[template-kumofs]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-kumofs.cfg
md5sum = 9746823ccbbedf42b3e759c3e7150252
output = ${buildout:directory}/template-kumofs.cfg
mode = 0644

[template]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance.cfg
md5sum = 44950f13e24f3271a5415753e582366d
output = ${buildout:directory}/template.cfg
mode = 0644

[template-memcached]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-memcached.cfg
md5sum = 7ed1d93dafa76adc025acb2f0e08c05f
output = ${buildout:directory}/template-memcached.cfg
mode = 0644

[template-erp5-development]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-erp5-development.cfg
md5sum = 56c7be11b384259bc7f65eabc0542b40
output = ${buildout:directory}/template-erp5-development.cfg
mode = 0644

[template-erp5-production]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/instance-erp5-production.cfg
md5sum = 19d352a8fc238281c5a340d1340fe361
output = ${buildout:directory}/template-erp5-production.cfg
mode = 0644

[template-snippet-zeo]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/snippet-zeo.cfg
md5sum = ca9ee3825ff90c5c894ff1da8c601552
output = ${buildout:directory}/template-snippet-zeo.cfg
mode = 0644

[template-snippet-master]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/snippet-master.cfg
md5sum = 410d8363f543cfa6f3d0f860a142b737
output = ${buildout:directory}/template-snippet-master.cfg
mode = 0644

[template-snippet-zope]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/snippet-zope.cfg
md5sum = d520bd8c74c32d81f96710bbdf4b146a
output = ${buildout:directory}/template-snippet-zope.cfg
mode = 0644

[template-snippet-backend]
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/snippet-backend.cfg
md5sum = 396053ffe2904ad9933a42fe2f8cfcde
output = ${buildout:directory}/template-snippet-backend.cfg
mode = 0644

[validator]
# Default json schema for instance parameters.
recipe = slapos.recipe.template
url = ${:_profile_base_location_}/configuration.json
md5sum = cbe1d75339c6cb20e1aef818797face1
output = ${buildout:directory}/schema.json
mode = 0644

[networkcache]
# signature certificates of the following uploaders.
#   Romain Courteaud
#   Sebastien Robin
#   Kazuhiko Shiozaki
#   Cedric de Saint Martin
signature-certificate-list =
  -----BEGIN CERTIFICATE-----
  MIIB4DCCAUkCADANBgkqhkiG9w0BAQsFADA5MQswCQYDVQQGEwJGUjEZMBcGA1UE
  CBMQRGVmYXVsdCBQcm92aW5jZTEPMA0GA1UEChMGTmV4ZWRpMB4XDTExMDkxNTA5
  MDAwMloXDTEyMDkxNTA5MDAwMlowOTELMAkGA1UEBhMCRlIxGTAXBgNVBAgTEERl
  ZmF1bHQgUHJvdmluY2UxDzANBgNVBAoTBk5leGVkaTCBnzANBgkqhkiG9w0BAQEF
  AAOBjQAwgYkCgYEApYZv6OstoqNzxG1KI6iE5U4Ts2Xx9lgLeUGAMyfJLyMmRLhw
  boKOyJ9Xke4dncoBAyNPokUR6iWOcnPHtMvNOsBFZ2f7VA28em3+E1JRYdeNUEtX
  Z0s3HjcouaNAnPfjFTXHYj4um1wOw2cURSPuU5dpzKBbV+/QCb5DLheynisCAwEA
  ATANBgkqhkiG9w0BAQsFAAOBgQBCZLbTVdrw3RZlVVMFezSHrhBYKAukTwZrNmJX
  mHqi2tN8tNo6FX+wmxUUAf3e8R2Ymbdbn2bfbPpcKQ2fG7PuKGvhwMG3BlF9paEC
  q7jdfWO18Zp/BG7tagz0jmmC4y/8akzHsVlruo2+2du2freE8dK746uoMlXlP93g
  QUUGLQ==
  -----END CERTIFICATE-----
  -----BEGIN CERTIFICATE-----
  MIIB8jCCAVugAwIBAgIJAPu2zchZ2BxoMA0GCSqGSIb3DQEBBQUAMBIxEDAOBgNV
  BAMMB3RzeGRldjMwHhcNMTExMDE0MTIxNjIzWhcNMTIxMDEzMTIxNjIzWjASMRAw
  DgYDVQQDDAd0c3hkZXYzMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCrPbh+
  YGmo6mWmhVb1vTqX0BbeU0jCTB8TK3i6ep3tzSw2rkUGSx3niXn9LNTFNcIn3MZN
  XHqbb4AS2Zxyk/2tr3939qqOrS4YRCtXBwTCuFY6r+a7pZsjiTNddPsEhuj4lEnR
  L8Ax5mmzoi9nE+hiPSwqjRwWRU1+182rzXmN4QIDAQABo1AwTjAdBgNVHQ4EFgQU
  /4XXREzqBbBNJvX5gU8tLWxZaeQwHwYDVR0jBBgwFoAU/4XXREzqBbBNJvX5gU8t
  LWxZaeQwDAYDVR0TBAUwAwEB/zANBgkqhkiG9w0BAQUFAAOBgQA07q/rKoE7fAda
  FED57/SR00OvY9wLlFEF2QJ5OLu+O33YUXDDbGpfUSF9R8l0g9dix1JbWK9nQ6Yd
  R/KCo6D0sw0ZgeQv1aUXbl/xJ9k4jlTxmWbPeiiPZEqU1W9wN5lkGuLxV4CEGTKU
  hJA/yXa1wbwIPGvX3tVKdOEWPRXZLg==
  -----END CERTIFICATE-----
  -----BEGIN CERTIFICATE-----
  MIIB7jCCAVegAwIBAgIJAJWA0jQ4o9DGMA0GCSqGSIb3DQEBBQUAMA8xDTALBgNV
  BAMMBHg2MXMwIBcNMTExMTI0MTAyNDQzWhgPMjExMTEwMzExMDI0NDNaMA8xDTAL
  BgNVBAMMBHg2MXMwgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBANdJNiFsRlkH
  vq2kHP2zdxEyzPAWZH3CQ3Myb3F8hERXTIFSUqntPXDKXDb7Y/laqjMXdj+vptKk
  3Q36J+8VnJbSwjGwmEG6tym9qMSGIPPNw1JXY1R29eF3o4aj21o7DHAkhuNc5Tso
  67fUSKgvyVnyH4G6ShQUAtghPaAwS0KvAgMBAAGjUDBOMB0GA1UdDgQWBBSjxFUE
  RfnTvABRLAa34Ytkhz5vPzAfBgNVHSMEGDAWgBSjxFUERfnTvABRLAa34Ytkhz5v
  PzAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAFLDS7zNhlrQYSQO5KIj
  z2RJe3fj4rLPklo3TmP5KLvendG+LErE2cbKPqnhQ2oVoj6u9tWVwo/g03PMrrnL
  KrDm39slYD/1KoE5kB4l/p6KVOdeJ4I6xcgu9rnkqqHzDwI4v7e8/D3WZbpiFUsY
  vaZhjNYKWQf79l6zXfOvphzJ
  -----END CERTIFICATE-----

[versions]
MySQL-python = 1.2.3
Paste = 1.7.5.1
PasteScript = 1.7.5
Products.CMFActionIcons = 2.1.3
Products.CMFCalendar = 2.2.2
Products.CMFCore = 2.2.5
Products.CMFDefault = 2.2.2
Products.CMFTopic = 2.2.1
Products.CMFUid = 2.2.1
Products.DCWorkflowGraph = 0.4.1
Products.ExternalEditor = 1.1.0
Products.GenericSetup = 1.6.4
Products.MimetypesRegistry = 2.0.3
Products.PluggableAuthService = 1.7.6
Products.PluginRegistry = 1.3b1
Products.TIDStorage = 5.4.7.dev-r45842
Products.Zelenium = 1.0.3
StructuredText = 2.11.1
Werkzeug = 0.8.2
apache-libcloud = 0.7.1
buildout-versions = 1.7
cElementTree = 1.0.5-20051216
chardet = 1.0.1
cloudooo = 1.2.3
cloudooo.handler.ffmpeg = 0.1
cloudooo.handler.imagemagick = 0.1
cloudooo.handler.ooo = 0.2
cloudooo.handler.pdf = 0.1
coverage = 3.5.1
csp-eventlet = 0.7.0
elementtree = 1.2.7-20070827-preview
erp5.recipe.cmmiforcei686 = 0.1.3
erp5diff = 0.8.1.5
eventlet = 0.9.16
five.localsitemanager = 2.0.5
greenlet = 0.3.2
hexagonit.recipe.cmmi = 1.5.0
hexagonit.recipe.download = 1.5.0
http-parser = 0.7.1
ipdb = 0.6.1
ipython = 0.12
meld3 = 0.6.7
ordereddict = 1.1
plone.recipe.command = 1.1
ply = 3.4
python-ldap = 2.4.6
python-memcached = 1.47
restkit = 3.3.2
rtjp-eventlet = 0.3.2
slapos.recipe.build = 0.7
slapos.recipe.template = 2.2
slapos.toolbox = 0.11
threadframe = 0.2
timerserver = 2.0.2
urlnorm = 1.1.2
uuid = 1.30
validictory = 0.7.2
xupdate-processor = 0.4

# Required by:
# slapos.core==0.21
# slapos.toolbox==0.11
Flask = 0.8

# Required by:
# PasteScript==1.7.5
# cloudooo==1.2.3
PasteDeploy = 1.5.0

# Required by:
# cloudooo==1.2.3
WSGIUtils = 0.7

# Required by:
# cloudooo==1.2.3
# slapos.core==0.21
argparse = 1.1

# Required by:
# slapos.toolbox==0.11
atomize = 0.1.1

# Required by:
# slapos.toolbox==0.11
feedparser = 5.1

# Required by:
# SOAPpy==0.12.0nxd001
fpconst = 0.7.2

# Required by:
# slapos.cookbook==0.9-dev
netaddr = 0.7.6

# Required by:
# slapos.core==0.21
netifaces = 0.6

# Required by:
# slapos.toolbox==0.11
paramiko = 1.7.7.1

# Required by:
# slapos.toolbox==0.11
psutil = 0.4.1

# Required by:
# cloudooo==1.2.3
python-magic = 0.4.0.1

# Required by:
# Products.CMFActionIcons==2.1.3
# Products.CMFCalendar==2.2.2
# Products.CMFCore==2.2.5
# Products.CMFDefault==2.2.2
# Products.CMFTopic==2.2.1
# Products.CMFUid==2.2.1
# Products.DCWorkflow==2.2.3nxd002
# Products.DCWorkflowGraph==0.4.1
# Products.ExternalEditor==1.1.0
# Products.GenericSetup==1.6.4
# Products.MimetypesRegistry==2.0.3
# Products.PluggableAuthService==1.7.6
# Products.PluginRegistry==1.3b1
# Products.TIDStorage==5.4.7.dev-r45842
# Products.Zelenium==1.0.3
# Zope2==2.12.21
# five.localsitemanager==2.0.5
# python-ldap==2.4.6
# slapos.cookbook==0.9-dev
# slapos.core==0.21
# slapos.toolbox==0.11
# zc.buildout==1.6.0-dev-SlapOS-003
# zc.recipe.egg==1.2.2
# zope.deprecation==3.4.0
# zope.structuredtext==3.4.0
setuptools = 0.6c12dev-r88846

# Required by:
# slapos.cookbook==0.9-dev
# slapos.toolbox==0.11
slapos.core = 0.21

# Required by:
# slapos.core==0.21
supervisor = 3.0a12

# Required by:
# slapos.cookbook==0.9-dev
# slapos.toolbox==0.11
xml-marshaller = 0.9.7
